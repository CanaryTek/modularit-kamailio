#
# Generated by Chef for <%= node['fqdn'] %> 
# Local modifications will be overridden
#

# We use db_text as a "last resort database"
loadmodule "db_text.so"

## Local definitions for kamailio

# Define functionalities we want to activate
<% node['kamailio']['server']['defines'].keys.each do |func| -%>
<%   if node['kamailio']['server']['defines'][func] == true -%>
#!define <%= func %>
<%  end -%>
<%end -%>

# Define DBURL
<%
if node['kamailio']['server']['db_engine'] == "mysql"
  host=node['kamailio']['server']['db_host']
  dbname=node['kamailio']['server']['db_name']
  user=node['kamailio']['server']['db_user']
  pass=node['kamailio']['server']['db_pass']
  dburl="mysql://#{user}:#{pass}@#{host}/#{dbname}"
else
  dburl="text:/#{node['kamailio']['server']['db_path']}"
end
-%>
#!define DBURL "<%= dburl %>"

# Define PSTN GW params
#!define PSTN_GW_IP "<%= node['kamailio']['server']['pstn_gw_ip'] %>"
#!define PSTN_GW_PORT "<%= node['kamailio']['server']['pstn_gw_port'] %>"

# Define Voice Mail GW params
#!define VOICEMAIL_GW_IP "<%= node['kamailio']['server']['voicemail_gw_ip'] %>"
#!define VOICEMAIL_GW_PORT "<%= node['kamailio']['server']['voicemail_gw_port'] %>"
